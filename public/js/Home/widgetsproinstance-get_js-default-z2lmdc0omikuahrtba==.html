
var e='';var id='';new Request.JSON({url:'/passport-getuname.html',method:'post',onComplete:function(re){if(re.uname){window.isLogin=true;$("uname_279").innerHTML=re.uname;$("memberBar_279").setStyle('display','block');if($("loginBar_279"))
$("loginBar_279").setStyle('display','none');!!$('memberBar_279').getElement('.syew')&&$('memberBar_279').getElement('.syew').setStyle('display',(re.vip_status?'':'none'));if(!!$('memberBar_279').getElement('.point'))$('memberBar_279').getElement('.point').getElement('b').innerHTML=re.point;}
else{window.isLogin=false;$("loginBar_279").setStyle('display','block');if($("memberBar_279"))
$("memberBar_279").setStyle('display','none');}},data:''}).send();var mouseover_247;var mouseout_247;JQ('#mem_h4_247').parent('li').hover(function(){clearTimeout(mouseout_247);mouseover_247=setTimeout(function(){JQ('#mem_dl_247').slideDown(200);},200);},function(){clearTimeout(mouseover_247);mouseout_247=setTimeout(function(){JQ('#mem_dl_247').slideUp(200);},200);});new Request.JSON({url:'/passport-get_msgnum.html',method:'post',onComplete:function(re){if(re.msg_num>0){var sup=$('index_mymessage').getElement('sup');if(sup){sup.set('html',re.msg_num);}else{var supElement=new Element('sup',{html:re.msg_num});var h4=$('index_mymessage');supElement.inject($('index_mymessage'));}}},data:''}).send();(function(scope){scope.getElement('button[type=submit]').addEvent('click',function(e){var val=scope.getElement('input').value.trim()===''?scope.getElement('input').get('placeholder'):scope.getElement('input').value.trim();if(val===''){e.stop();Dialog.alert("搜索字数太少，会影响到搜索结果，重新填写一下吧");}else{scope.getElement('input').value=val;}});var search_keywords=decodeURIComponent(Memory.get('search_key'));if(search_keywords=='null'){search_keywords='';}
var path='http://cdnec.sasa.com/public/app/b2c/statics/js/';$LAB.script(path+'autocompleter.js').wait(function(){var item=scope.getElement('[autocompleter]');var options={};try{options=JSON.decode(item.get('data-autocompleter-options'));}catch(e){}
Object.merge(options,item.retrieve('autocompleter_options',{}));Autocompleter.Request.aJSON=new Class({Extends:Autocompleter.Request.JSON,initialize:function(el,url,options){this.parent(el,options);this._hotword=new Request.JSON(Object.merge({'url':url.hotword||this.options.url,'link':'cancel'},this.options.ajaxOptions)).addEvent('onComplete',this.queryResponse.bind(this));this._suggest=new Request.JSON(Object.merge({'url':url.suggest||this.options.url,'link':'cancel'},this.options.ajaxOptions)).addEvent('onComplete',this.queryResponse.bind(this));},prefetch:function(){var value=this.element.value,query=value;if(this.options.multiple){var split=this.options.separatorSplit;var values=value.split(split);var index=this.element.getSelectedRange().start;var toIndex=value.substr(0,index).split(split);var last=toIndex.length-1;index-=toIndex[last].length;query=values[last];}
if(query.length<this.options.minLength){this.request=this._hotword;this.query();}else{this.request=this._suggest;if(this.visible&&query==this.selectedValue){if(this.visible)return false;this.showChoices();}else{this.queryValue=query;this.queryIndex=index;this.query();}}
return true;},setSelection:function(finish){var input=((this.selected.getElement('span')||this.selected).innerText||(this.selected.getElement('span')||this.selected).textContent)+'',value=input;var start=0,end=input.length;if(this.queryValue){var start=this.queryValue.length;if(input.substr(0,start).toLowerCase()!=this.queryValue.toLowerCase())start=0;}
if(this.options.multiple){var split=this.options.separatorSplit;value=this.element.value;start+=this.queryIndex;end+=this.queryIndex;var old=value.substr(this.queryIndex).split(split,1)[0];value=value.substr(0,this.queryIndex)+input+value.substr(this.queryIndex+old.length);if(finish){var tokens=value.split(this.options.separatorSplit).filter(function(entry){return this.test(entry);},/[^\s,]+/);if(!this.options.allowDupes)tokens=[].combine(tokens);var sep=this.options.separator;value=tokens.join(sep)+sep;end=value.length;}}
this.observer.setValue(value);this.opted=value;if(finish||this.selectMode=='pick')start=end;this.element.selectRange(start,end);this.fireEvent('onSelection',[this.element,this.selected,value,input]);},addChoiceEvents:function(el){return el.addEvents({'mouseenter':this.mouseOver.bind(this,el),'mousedown':this.choiceSelect.bind(this,el)});},mouseOver:function(choice,selection){if(!choice||choice==this.selected)return;if(this.selected)this.selected.removeClass('autocompleter-selected');this.selected=choice.addClass('autocompleter-selected');},onCommand:function(e){if(!e&&this.focussed)return this.prefetch();if(e&&e.key&&!e.shift){switch(e.key){case'enter':if(this.element.value!=this.opted)return true;if(this.selected&&this.visible){this.choiceSelect(this.selected);return!!(this.options.autoSubmit);}
break;case'up':case'down':if(true||this.queryValue!==null){var up=(e.key=='up');var obj=(this.selected||this.choices)[(this.selected)?((up)?'getPrevious':'getNext'):((up)?'getLast':'getFirst')]('li');if(!obj){obj=this.choices[((up)?'getLast':'getFirst')]('li');}
this.choiceOver(obj,true);}
return false;case'esc':case'tab':this.hideChoices(true);break;}}
return true;}});new Autocompleter.Request.aJSON(item,{hotword:'/search-hotword.html',suggest:'/search-suggest.html'},options);});})($('searchbar_219'));window.addEvent('domready',function(){var cartViewUrl='/cart-view.html';var MiniCarWidgets={init:function(){var minicart=this.cart=$('minicart_238'),minicart_detail=this.detailbox=minicart.getElement('.MiniCarDetail'),handle=this.handle=minicart.getElement('.js_minicart-title');this.attach();},display:function(){display='block';if(!!['form-cart','order-create',$$('.member-center')[0]].some(function(el){return $(el)}))display='none';this.detailbox.setStyle('display',display);return this;},attach:function(){this.cart.addEvents({'mouseenter':function(e){if(e&&this.state)retur;if(e&&$(e.target)==this.handle&&this.cart.getElement('.CartInfoItems'))
return this.show();this.request([{url:cartViewUrl,method:'post',onRequest:function(){}.bind(this)}]);this.show();}.bind(this),'mouseleave':function(e){this.hide();}.bind(this)});this.cart.addEvent('_show',function(e){this.handle.fireEvent('mouseenter');}.bind(this));window.addEvent('scroll',this.display.bind(this));},show:function(e){this.detailbox.setStyles({'visibility':'visible'});this.state=true;document.addEvent('click',function(){this.hide();document.removeEvent('click',arguments.callee);}.bind(this));},hide:function(){this.state=false;this.detailbox.setStyle('visibility','hidden');},removeCart:function(el){var cartBox=el.getParent('.minicart-single'),self=this,url=cartBox.get('urlremove');if(cartBox.hasClass('havechild')){var chlid_id=cartBox.get('chlid_id'),group;if(group=this.detailbox.getElements('.'+chlid_id)){group.each(function(ell){ell.destroy();});}}
cartBox.destroy();if(!this.detailbox.getElement('.minicart-single')){this.detailbox.getElement('.CartInfoItems').destroy();}
var _detailbox=cartBox;this.request([{url:url,data:_detailbox,onComplete:function(re){this.detailbox.innerHTML=re;var h=window.getSize().y-this.detailbox.getPosition(document.body).y+window.getScroll().y-this.detailbox.getPatch().y;this.display().addEvent();}.bind(this)}]);},removeCartActionDelete:function(el){var cartBox=el.getParent('.goods-item'),self=this,url=el.get('href');cartBox.destroy();var _detailbox=cartBox;this.request([{url:url,data:_detailbox,onComplete:function(re){this.detailbox.innerHTML=re;var h=window.getSize().y-this.detailbox.getPosition(document.body).y+window.getScroll().y-this.detailbox.getPatch().y;this.display().addEvent();if($('js_cartnum'))$('js_cartnum').innerHTML=this.detailbox.getElement('i')?this.detailbox.getElement('.minicart-info i').innerHTML:0;}.bind(this)}]);},addEvent:function(){var _this=this;this.detailbox.getElements('.delcart').addEvent('click',function(e){e.stop();_this.removeCart(this);});this.detailbox.getElements('.action-delete').addEvent('click',function(e){e.stop();_this.removeCartActionDelete(this);});},request:function(){var params=Array.flatten(arguments).link({'remoteURL':Type.isString,'options':Type.isObject});if(!params.options)return;params.options.data=(params.options.data?params.options.data.toQueryString():'')+'&mini_cart_list=true';if(!params.options.url)return false;params=Object.append({url:params.remoteURL,method:'post',onSuccess:function(re){this.detailbox.innerHTML=re;var h=window.getSize().y-this.detailbox.getPosition(document.body).y+window.getScroll().y-this.detailbox.getPatch().y;this.display().addEvent();updateCartInfo();}.bind(this)},params.options||{});return new Request(params).send();}};MiniCarWidgets.init();});window.addEvent('domready',function(){if($$('.navicon li').length>0){slideMenu.build('index_navicon',115,1,1,1);};$$('.cp_accordion').setStyle('visibility','visible');});var slideMenu=function(){var sp,st,t,m,sa,l,w,sw,ot;return{build:function(sm,sw,mt,s,sl){sp=s;st=sw;t=mt;m=document.getElementById(sm);sa=m.getElementsByTagName('li');l=sa.length;w=l*sw-74;sw=w/l;ot=Math.floor((w-st)/(l-1));var i=0;for(i;i<l;i++){s=sa[i];s.style.width=sw+'px';this.timer(s);}
if(sl!=null){m.timer=setInterval(function(){slideMenu.slide(sa[sl-1]);},t)}},timer:function(s){s.onmouseover=function(){clearInterval(m.timer);m.timer=setInterval(function(){slideMenu.slide(s);},t)}},slide:function(s){var cw=parseInt(s.style.width);if(cw<st){var owt=0;var i=0;for(i;i<l;i++){if(sa[i]!=s){var o,ow;var oi=0;o=sa[i];ow=parseInt(o.style.width);if(ow>ot){oi=Math.floor((ow-ot)/sp);oi=(oi>0)?oi:1;if(l>2){o.style.width=30+'px';}else{o.style.width=22+'px';}}
owt=owt+(ow-oi);}}
s.style.width=st+'px';}else{clearInterval(m.timer);}}};}();(function(){var url=location.href.split('/').getLast();if(url.indexOf('?')>=0){url=url.substring(0,url.indexOf('?'));}
if(!url.trim().length||url=='index.php'||url=='index')url='index.php/mart';var reg=new RegExp('\/'+url,'i');var menulist=$$('.nav-item a');menulist.each(function(el){if(el&&el.href.test(reg))el.addClass('active');});})();(function(){var mouseover_276;var mouseout_276;JQ('#nav-item-more_276').hover(function(){$('nav-itembox_276').setStyle('visibility','visible');clearTimeout(mouseout_276);mouseover_276=setTimeout(function(){JQ('#nav-itembox_276').slideDown(200);},200);},function(){clearTimeout(mouseover_276);mouseout_276=setTimeout(function(){JQ('#nav-itembox_276').slideUp(200);},200);});})();JQ(function(){if(JQ('#scroll-pane-arrows').length>0){JQ('#scroll-pane-arrows').jScrollPane({showArrows:false,horizontalGutter:1,enableKeyboardNavigation:false});};});(function(){var obj_handle=$$('#cat_269 .category-handle')||[];var obj_box=$$('#cat_269 .category-box')||[];if(!obj_box.length)return;var url=location.href.split('/').getLast(),n=url.lastIndexOf('-');if(n>-1)url=url.substring(0,n);if(url.indexOf('?')>=0){url=url.substring(0,url.indexOf('?'));}
if(!url.trim().length)url='index';var reg=new RegExp('^index','i');var _lastLimitTime=+new Date('Wed, 11 Nov 2015 15:59:59 GMT'),_startLimitTime=+new Date('Tue, 10 Nov 2015 16:00:00 GMT'),_lastLimitTime_t=null;function lastLimitTime1111_bindEvt(){if(obj_handle.length){obj_handle.addEvents({'mouseenter':function(e){obj_box.setStyle('visibility','visible');},'mouseleave':function(e){obj_box.setStyle('visibility','hidden');}});}
obj_box.addEvents({'mouseenter':function(e){obj_box.setStyle('visibility','visible');},'mouseleave':function(e){obj_box.setStyle('visibility','hidden');}});}
function lastLimitTime1111(){if(+new Date()>_startLimitTime&&+new Date()<_lastLimitTime){obj_box.setStyle('visibility','hidden');lastLimitTime1111_bindEvt();}else{if(url.test(reg)){obj_box.setStyle('visibility','visible');}else{lastLimitTime1111_bindEvt();}}}
lastLimitTime1111();})();var $el,leftPos,newWidth;JQ("#sub_nav_244").append("<li id='magic-line'></li>");var $magicLine=JQ("#magic-line");JQ("#sub_nav_244").find("li").hover
(function(){$el=JQ(this);leftPos=$el.position().left;newWidth=$el.width();$magicLine.css("display",'');$magicLine.stop().animate({left:leftPos,width:newWidth});},function(){$magicLine.stop().animate({left:$magicLine.data("origLeft"),width:$magicLine.data("origWidth")});if(JQ(".current_page_item").length>0){}else{$magicLine.css("display",'none');}});window.addEvent('resize',function(){$el=JQ(".current_page_item ");if($el.length>0){leftPos=$el.position().left;newWidth=$el.width();$magicLine.stop().animate({left:leftPos,width:newWidth});}});(function(){var url=location.href;if(!url.trim().length||url=='index.php'||url=='index')url='';var menulist=$$('#sub_nav_244 li')||[];if(menulist.length>0)
menulist.each(function(el){var obj=$(el).getElement('a');if(obj&&obj.get('href')&&((url.indexOf(obj.get('href')))>=0)){el.addClass('current_page_item');$el=JQ(el);var xleftPos=$el.position().left;var xnewWidth=$el.width();$magicLine.width(JQ(".current_page_item").width()).css("left",JQ(".current_page_item ").position().left).data("origLeft",xleftPos).data("origWidth",xnewWidth);$magicLine.stop().animate({left:xleftPos,width:xnewWidth});}else{el.removeClass('current_page_item');}});if(JQ(".current_page_item").length>0){$magicLine.width(JQ(".current_page_item").width()).css("display",'');}else{$magicLine.css("display",'none');}})();if(!('placeholder'in document.createElement('input'))){JQ('input[placeholder],textarea[placeholder]').each(function(){var that=JQ(this),text=that.attr('placeholder');if(that.attr('name')=='uname'||that.attr('name')=='password'){if(that.val()===""||that.val()===text){that.val(text);that.css({'color':'grey'});}
that.focus(function(){if(that.val()===text){that.val("");}}).blur(function(){if(that.val()===""||that.val()===text){that.val('').prev().css({'left':'35px','top':'5px'});}}).closest('form').submit(function(){if(that.val()===text){that.val('');}});}});}
var e=$("nickname").value;var id=$("member_id").value;if(!id){Module=new Module('page',['signin']);var modname='page.signin';var showVcode=$("showVcode").value;Module.get(modname).getElement('button[type=submit]').store('_ajax_config',{progress:function(rs){if(rs.error){if(showVcode||rs.data&&rs.data.needVcode){Module.element(modname,'.action-verifycode').removeClass('hide');changeCode(Module.element(modname,'img.auto-change-verify-handle'));}
return top.Message.error(rs.error,function(){});}
if(rs.success&&rs.data&&rs.data.script_str){eval(rs.data.script_str);}
if(rs.success)return top.Message.success(rs.success,function(){redirect(rs.redirect);});}});function redirect(url){if(url)top.location.href=url;}}
if(id){$("uname_236").innerHTML=e;if($("memberBar_236"))
$("memberBar_236").show();if($("page_signin_236"))
$("page_signin_236").hide();}
else{if($("memberBar_236"))
$("memberBar_236").hide();if($("page_signin_236"))
$("page_signin_236").show();}